---
title: ğŸš€å…³äº Vue3 ä¸­çš„ ref è§£åŒ…
date: '2024-03-20'
tags: ['vue']
draft: false
summary: æœ¬æ–‡å°†å¸®åŠ©ä½ ç†è§£ Vue3 ä¸­ ref çš„è§£åŒ…æœºåˆ¶åŠå…¶åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„è¡¨ç°ã€‚
---

# Vue3 ä¸­çš„ ref è§£åŒ…æŒ‡å—

åœ¨ Vue3 ä¸­ï¼Œ`ref` æ˜¯ä¸€ä¸ªé‡è¦çš„å“åº”å¼ APIã€‚ç†è§£ `ref` çš„è§£åŒ…æœºåˆ¶å¯¹äºæœ‰æ•ˆä½¿ç”¨ Vue3 è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æ¢è®¨ `ref` åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„è§£åŒ…è¡Œä¸ºã€‚

## 1. ä½œä¸º reactive å¯¹è±¡çš„å±æ€§

å½“ `ref` ä½œä¸º `reactive` å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è§£åŒ…ä¸ºæ™®é€šå±æ€§ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥è®¿é—®å’Œä¿®æ”¹å®ƒçš„å€¼ã€‚

```typescript
<script setup lang="ts">
import { reactive, ref } from "vue";

const count = ref(0);
const state = reactive({ count });

console.log(state.count); // 0
state.count = 1;
console.log(count.value); // 1

const otherCount = ref(2);
state.count = otherCount;
console.log(state.count); // 2
console.log(count.value); // 1

const shallowState = shallowReactive({ count });
// è¿™é‡Œéœ€è¦ .value
console.log(shallowState.count.value); // åªæœ‰å½“åµŒå¥—åœ¨ä¸€ä¸ªæ·±å±‚å“åº”å¼å¯¹è±¡å†…æ—¶ï¼Œæ‰ä¼šå‘ç”Ÿ ref è§£åŒ…
</script>

<template></template>

<style scoped></style>
```

## 2. ä½œä¸ºå“åº”å¼æ•°ç»„æˆ–åŸç”Ÿé›†åˆä¸­çš„å…ƒç´ 

å½“ `ref` ä½œä¸ºå“åº”å¼æ•°ç»„æˆ–åŸç”Ÿé›†åˆï¼ˆå¦‚ `Map`ï¼‰ä¸­çš„å…ƒç´ æ—¶ï¼Œå®ƒä¸ä¼šè¢«è‡ªåŠ¨è§£åŒ…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ä½¿ç”¨ `.value` æ¥è®¿é—®å®ƒçš„å€¼ã€‚

```typescript
<script setup lang="ts">
import { reactive, ref } from "vue";

const books = reactive([ref("Vue 3 Guide")]);
// è¿™é‡Œéœ€è¦ .value
console.log(books[0].value); // Vue 3 Guide

const map = reactive(new Map([["count", ref(0)]]));
// è¿™é‡Œéœ€è¦ .value
console.log(map.get("count").value); // 0
</script>

<template></template>

<style scoped></style>
```

## 3. åœ¨æ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­çš„è§£åŒ…

åœ¨æ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­ï¼Œåªæœ‰é¡¶çº§çš„ `ref` å±æ€§æ‰ä¼šè¢«è§£åŒ…ã€‚è¿™æ„å‘³ç€å¦‚æœ `ref` åµŒå¥—åœ¨å¯¹è±¡ä¸­ï¼Œå®ƒä¸ä¼šè¢«è‡ªåŠ¨è§£åŒ…ã€‚

```typescript
<script setup lang="ts">
import { ref } from "vue";

/** count å’Œ object æ˜¯é¡¶çº§å±æ€§ï¼Œä½† object.id ä¸æ˜¯ */
const count = ref(0);
const object = { id: ref(1) };

/** å¯ä»¥å°† id è§£æ„ä¸ºä¸€ä¸ªé¡¶çº§å±æ€§ */
const { id } = object;
</script>

<template>
  <!-- 2 -->
  <div>{{ count + 1 }}</div>

  <!-- è¡¨è¾¾å¼ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œ -->
  <div>{{ object.id + 1 }}</div>

  <!-- 2 -->
  <div>{{ id + 1 }}</div>

  <!-- å¦‚æœ ref æ˜¯æ–‡æœ¬æ’å€¼çš„æœ€ç»ˆè®¡ç®—å€¼ (å³ {{ }} æ ‡ç­¾)ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è§£åŒ…  -->
  <div>{{ object.id }}</div>
</template>

<style scoped></style>
```

## æ³¨æ„äº‹é¡¹

1. åœ¨ `<script setup>` ä¸­ï¼Œé¡¶çº§çš„ `ref` ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œä½†åµŒå¥—çš„ `ref` éœ€è¦ä½¿ç”¨ `.value`ã€‚
2. åœ¨å“åº”å¼æ•°ç»„æˆ–é›†åˆä¸­ï¼Œ`ref` ä¸ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œå¿…é¡»ä½¿ç”¨ `.value`ã€‚
3. åœ¨æ¨¡æ¿ä¸­ï¼Œåªæœ‰é¡¶çº§çš„ `ref` å±æ€§ä¼šè¢«è§£åŒ…ï¼ŒåµŒå¥—çš„ `ref` éœ€è¦æ‰‹åŠ¨è§£åŒ…ã€‚

## æœ€ä½³å®è·µ

1. åœ¨ä½¿ç”¨ `ref` æ—¶ï¼Œæ³¨æ„å…¶è§£åŒ…è¡Œä¸ºï¼Œä»¥é¿å…ä¸å¿…è¦çš„é”™è¯¯ã€‚
2. åœ¨å¤æ‚çš„å“åº”å¼ç»“æ„ä¸­ï¼Œè€ƒè™‘ä½¿ç”¨ `reactive` æ¥ç®¡ç†çŠ¶æ€ã€‚
3. åœ¨æ¨¡æ¿ä¸­ï¼Œå°½é‡å°† `ref` ä½œä¸ºé¡¶çº§å±æ€§ä½¿ç”¨ï¼Œä»¥ä¾¿äºè‡ªåŠ¨è§£åŒ…ã€‚

é€šè¿‡ç†è§£ `ref` çš„è§£åŒ…æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ Vue3 çš„å“åº”å¼ç³»ç»Ÿï¼Œæ„å»ºå‡ºæ›´çµæ´»å’Œé«˜æ•ˆçš„åº”ç”¨ã€‚
